<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Isha Automation Practice â€“ Language Switcher</title>

<link rel="icon" href="../images/isha-logo.jpeg">
<link rel="stylesheet" href="../styles/base.css">
<link rel="stylesheet" href="../styles/layout.css">
<link rel="stylesheet" href="../styles/components.css">
</head>

<body>

<!-- ================= HEADER ================= -->
<script src="../includes/header.js"></script>

<!-- ================= BREADCRUMB ================= -->
<div class="breadcrumb-bar">
  <a href="../index.html" class="crumb home">ğŸ  Home</a>
  <span class="sep">â€º</span>
  <span class="crumb">Labs</span>
  <span class="sep">â€º</span>
  <span class="crumb current">Language Switcher</span>
</div>

<!-- ================= CONTENT ================= -->
<div class="container">
<div class="grid">

<!-- ================= LANGUAGE SWITCHER CARD ================= -->
<section class="card">
  <div class="card-header">
    <h2 class="card-title">ğŸŒ Language Switcher (i18n)</h2>
    <span class="kbd">Dropdown Selector</span>
  </div>

  <div class="card-body" style="max-width:520px">

    <!-- Language Dropdown -->
    <!-- Language Dropdown -->
<div class="field">

  <div class="lang-select" id="langSelect">
    <button class="lang-btn" id="langBtn" type="button">
      <span class="flag">ğŸ‡¬ğŸ‡§</span>
      <span id="langBtnText">English</span>
      <span class="caret">â–¾</span>
    </button>

    <div class="lang-menu" id="langMenu">
      <div class="lang-item" data-lang="en">
        <span class="flag">ğŸ‡¬ğŸ‡§</span> English
      </div>
      <div class="lang-item" data-lang="ta">
        <span class="flag">ğŸ‡®ğŸ‡³</span> Tamil
      </div>
      <div class="lang-item" data-lang="hi">
        <span class="flag">ğŸ‡®ğŸ‡³</span> Hindi
      </div>
      <div class="lang-item" data-lang="es">
        <span class="flag">ğŸ‡ªğŸ‡¸</span> Spanish
      </div>
    </div>
  </div>
</div>


    <hr style="border:0;border-top:1px dashed var(--border);margin:16px 0">

    <!-- Demo Text -->
    <div class="field">
      <p data-i18n="title" style="font-size:1.1rem;font-weight:700">
        Automation Practice Site
      </p>
    </div>

    <div class="field">

      <p data-i18n="desc">
        Welcome to the testing playground.
      </p>
    </div>

    <div class="row-actions">
      <button class="btn btn-primary" data-i18n="submit">Submit</button>
    </div>

    <p class="kbd" style="margin-top:12px">
      Current language:
      <span id="currentLangLabel">English</span>
    </p>

  </div>
</section>

</div>
</div>

<!-- ================= FOOTER ================= -->
<div class="lab-nav-footer">
  <a class="btn btn-secondary" href="../index.html">â¬… Back to Home</a>
  <a class="btn btn-primary" href="alerts.html">Next â¡ Alerts</a>
</div>

<footer class="site-footer">Â© Isha Automation</footer>

<!-- ================= SCRIPT ================= -->
<script>
const translations = {
  en: {
    name: "English",
    flag: "ğŸ‡¬ğŸ‡§",
    title: "Automation Practice Site",
    desc: "Welcome to the testing playground.",
    submit: "Submit"
  },
  ta: {
    name: "Tamil",
    flag: "ğŸ‡®ğŸ‡³",
    title: "à®†à®Ÿà¯à®Ÿà¯‹à®®à¯‡à®·à®©à¯ à®ªà®¯à®¿à®±à¯à®šà®¿ à®¤à®³à®®à¯",
    desc: "à®šà¯‹à®¤à®©à¯ˆ à®ªà®¯à®¿à®±à¯à®šà®¿ à®¤à®³à®¤à¯à®¤à®¿à®±à¯à®•à¯ à®µà®°à®µà¯‡à®±à¯à®•à®¿à®±à¯‹à®®à¯.",
    submit: "à®šà®®à®°à¯à®ªà¯à®ªà®¿à®•à¯à®•à®µà¯à®®à¯"
  },
  hi: {
    name: "Hindi",
    flag: "ğŸ‡®ğŸ‡³",
    title: "à¤‘à¤Ÿà¥‹à¤®à¥‡à¤¶à¤¨ à¤…à¤­à¥à¤¯à¤¾à¤¸ à¤¸à¤¾à¤‡à¤Ÿ",
    desc: "à¤ªà¤°à¥€à¤•à¥à¤·à¤£ à¤…à¤­à¥à¤¯à¤¾à¤¸ à¤¸à¥à¤¥à¤² à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆà¥¤",
    submit: "à¤œà¤®à¤¾ à¤•à¤°à¥‡à¤‚"
  },
  es: {
    name: "Spanish",
    flag: "ğŸ‡ªğŸ‡¸",
    title: "Sitio de PrÃ¡ctica de AutomatizaciÃ³n",
    desc: "Bienvenido al Ã¡rea de pruebas.",
    submit: "Enviar"
  }
};

function applyLanguage(lang){
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key = el.getAttribute("data-i18n");
    if(translations[lang] && translations[lang][key]){
      el.textContent = translations[lang][key];
    }
  });

  const btn = document.getElementById("langBtn");
  const btnText = document.getElementById("langBtnText");
  const label = document.getElementById("currentLangLabel");

  if(btn){
    const flagSpan = btn.querySelector(".flag");
    if(flagSpan) flagSpan.textContent = translations[lang].flag;
  }
  if(btnText) btnText.textContent = translations[lang].name;
  if(label) label.textContent = translations[lang].name;

  localStorage.setItem("isha_lang", lang);
}

function bindLanguageUI(){
  const langBtn = document.getElementById("langBtn");
  const langMenu = document.getElementById("langMenu");
  const langSelect = document.getElementById("langSelect");

  if(!langBtn || !langMenu) return;

  langBtn.onclick = (e)=>{
    e.stopPropagation();
    langMenu.classList.toggle("show");
  };

  langMenu.querySelectorAll(".lang-item").forEach(item=>{
    item.onclick = ()=>{
      const lang = item.dataset.lang;
      applyLanguage(lang);
      langMenu.classList.remove("show");
    };
  });

  document.addEventListener("click", e=>{
    if(!langSelect.contains(e.target)){
      langMenu.classList.remove("show");
    }
  });
}

/* ğŸ”¥ CRITICAL PART: wait for header.js to finish */
function initLanguageSystem(){
  const lang = localStorage.getItem("isha_lang") || "en";
  applyLanguage(lang);
  bindLanguageUI();
}

/* Wait a bit because header.js injects HTML */
window.addEventListener("load", ()=>{
  setTimeout(initLanguageSystem, 300);
});
</script>




</body>
</html>
